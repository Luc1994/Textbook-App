package com.parse.starter;

import android.app.Activity;
//import android.app.AlertDialog;
import android.os.Bundle;

import com.parse.Parse;
import com.parse.ParseACL;
import com.parse.ParseAnalytics;
import com.parse.ParseObject;
import com.parse.ParseUser;

import android.app.Dialog;

public class ParseStarterProjectActivity extends Activity {
	/** Called when the activity is first created. */
	public void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState); 
		
		// Add your initialization code here
	    Parse.initialize(this, "imNR8maOdk7pX3UOCTT67BRt58azQVw91e9vtdbl", "tYAaTCZ7f6SMkS1aAGSCBn7XkN7goCx7dTY0z1sY");
	    // Also, specify a default Activity to handle push notifications in this method as well

	    ParseUser.enableAutomaticUser();
	    ParseACL defaultACL = new ParseACL();
	      
	    // If you would like all objects to be private by default, remove this line.
	    defaultACL.setPublicReadAccess(true);
	    
	    ParseACL.setDefaultACL(defaultACL, true);
		
		ParseAnalytics.trackAppOpened(getIntent());
		sendToCloud("How To Code", "Aadi T", 25, 40);
	}
	
	public String keyToLower (String input) {
		String lowerCaseKey = new String (input.toLowerCase());
		  return lowerCaseKey;		
	}
	
	public int priceRangeLowerBound (String priceRange) {
		if (priceRange.indexOf("-") != -1 && priceRange.indexOf(" ") == -1) {
			int lowerBound = Integer.parseInt(priceRange.substring(0, priceRange.indexOf("-")));
			return lowerBound;
		}
		else if (priceRange.indexOf("-") == -1 && priceRange.indexOf(" ") != -1) {
			int lowerBound = Integer.parseInt(priceRange.substring(0, priceRange.indexOf(" ")));
			return lowerBound;
		}
		else {
			if (priceRange.indexOf("-") < priceRange.indexOf(" ")) {
				int lowerBound = Integer.parseInt(priceRange.substring(0, priceRange.indexOf("-")));
				return lowerBound;
			}
			else {
				int lowerBound = Integer.parseInt(priceRange.substring(0, priceRange.indexOf(" ")));
				return lowerBound;
			}
		}
		
	}
	
	public int priceRangeUpperBound (String priceRange) {
		//this code is rudimentary and doesn't account for the possibility of multiple spaces or dashes
		if (priceRange.indexOf("-") != -1 && priceRange.indexOf(" ") == -1) {
			int upperBound = Integer.parseInt(priceRange.substring(priceRange.indexOf("-") + 1, priceRange.length()));
			return upperBound;
		}
		else if (priceRange.indexOf("-") == -1 && priceRange.indexOf(" ") != -1) {
			int upperBound = Integer.parseInt(priceRange.substring(priceRange.indexOf(" ") + 1, priceRange.length()));
			return upperBound;
		}
		else {
			if (priceRange.indexOf("-") < priceRange.indexOf(" ")) {
				int upperBound = Integer.parseInt(priceRange.substring(priceRange.indexOf("-") + 1, priceRange.length()));
				return upperBound;
			}
			else {
				int upperBound = Integer.parseInt(priceRange.substring(priceRange.indexOf(" "), priceRange.length()));
				return upperBound;
			}
		}
	}
	
	public void sendToCloud (String title, String author, int lowPrice, int highPrice) {
		ParseObject textbook = new ParseObject("SampleTextbook");
		textbook.put("Title", keyToLower(title));
		textbook.put("Author", keyToLower(author));
		textbook.put("LowPrice", lowPrice);
		textbook.put("HighPrice", highPrice);
		textbook.saveInBackground();
		
		/*System.out.println(textbook.getString("Title"));
		System.out.println(textbook.getString("Author"));
		System.out.println(textbook.getInt("LowPrice"));
		System.out.println(textbook.getInt("HighPrice"));*/
	}

}
